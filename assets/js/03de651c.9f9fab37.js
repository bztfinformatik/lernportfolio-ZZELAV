"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[1996],{3905:(e,n,t)=>{t.d(n,{Zo:()=>p,kt:()=>m});var r=t(7294);function i(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function s(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?s(Object(t),!0).forEach((function(n){i(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function a(e,n){if(null==e)return{};var t,r,i=function(e,n){if(null==e)return{};var t,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)t=s[r],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)t=s[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}var l=r.createContext({}),u=function(e){var n=r.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},p=function(e){var n=u(e.components);return r.createElement(l.Provider,{value:n},e.children)},c="mdxType",d={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},g=r.forwardRef((function(e,n){var t=e.components,i=e.mdxType,s=e.originalType,l=e.parentName,p=a(e,["components","mdxType","originalType","parentName"]),c=u(t),g=i,m=c["".concat(l,".").concat(g)]||c[g]||d[g]||s;return t?r.createElement(m,o(o({ref:n},p),{},{components:t})):r.createElement(m,o({ref:n},p))}));function m(e,n){var t=arguments,i=n&&n.mdxType;if("string"==typeof e||i){var s=t.length,o=new Array(s);o[0]=g;var a={};for(var l in n)hasOwnProperty.call(n,l)&&(a[l]=n[l]);a.originalType=e,a[c]="string"==typeof e?e:i,o[1]=a;for(var u=2;u<s;u++)o[u]=t[u];return r.createElement.apply(null,o)}return r.createElement.apply(null,t)}g.displayName="MDXCreateElement"},873:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>c,frontMatter:()=>s,metadata:()=>a,toc:()=>u});var r=t(7462),i=(t(7294),t(3905));const s={sidebar_position:2,title:"Tag 14",pagination_prev:null,tags:["Tag 14","PHP","LB1 / LB2","Session","Cookies"]},o="Tag 14",a={unversionedId:"tag-0014/index",id:"tag-0014/index",title:"Tag 14",description:"Arbeiten an LB1 / LB2",source:"@site/docs/tag-0014/index.md",sourceDirName:"tag-0014",slug:"/tag-0014/",permalink:"/lernportfolio-ZZELAV/docs/tag-0014/",draft:!1,tags:[{label:"Tag 14",permalink:"/lernportfolio-ZZELAV/docs/tags/tag-14"},{label:"PHP",permalink:"/lernportfolio-ZZELAV/docs/tags/php"},{label:"LB1 / LB2",permalink:"/lernportfolio-ZZELAV/docs/tags/lb-1-lb-2"},{label:"Session",permalink:"/lernportfolio-ZZELAV/docs/tags/session"},{label:"Cookies",permalink:"/lernportfolio-ZZELAV/docs/tags/cookies"}],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2,title:"Tag 14",pagination_prev:null,tags:["Tag 14","PHP","LB1 / LB2","Session","Cookies"]},sidebar:"tutorialSidebar",next:{title:"Tag 15",permalink:"/lernportfolio-ZZELAV/docs/tag-0015/"}},l={},u=[{value:"1 Session",id:"1-session",level:2},{value:"2 Cookies",id:"2-cookies",level:2},{value:"3 Auftrag G\xe4stez\xe4hler",id:"3-auftrag-g\xe4stez\xe4hler",level:2}],p={toc:u};function c(e){let{components:n,...s}=e;return(0,i.kt)("wrapper",(0,r.Z)({},p,s,{components:n,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"tag-14"},"Tag 14"),(0,i.kt)("admonition",{type:"info"},(0,i.kt)("p",{parentName:"admonition"},"Arbeiten an LB1 / LB2")),(0,i.kt)("h2",{id:"1-session"},"1 Session"),(0,i.kt)("p",null,"HTTP ist zustandlos, d.h. jeder neue Anfrage hat nichts mit der vorherigen zu tun. Damit Informationen zwischen Seiten zwischengespeichert werden k\xf6nnen, werden Sessions genutzt."),(0,i.kt)("p",null,"Um Session zu nutzen, muss DIREKT nach ",(0,i.kt)("inlineCode",{parentName:"p"},"<?php")," die ",(0,i.kt)("inlineCode",{parentName:"p"},"session_start();"),"-Funktion aufgerufen werden. Damit wird eine eindeutige ID dieser Sitzung erstellt. In der Session k\xf6nnen dann noch selbst Daten gespeichert werden. Z.B. den Username:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-php"},"`$_SESSION['username'] = 'admin';\n")),(0,i.kt)("p",null,"Um die Daten aus der Session zu l\xf6schen, z.B. beim Logout, gibt es zwei Wege."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-php",metastring:'title="Einzelne Werte l\xf6schen"',title:'"Einzelne',Werte:!0,'l\xf6schen"':!0},"unset($_SESSION['username']);\n")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-php",metastring:'title="Komplette Session l\xf6schen"',title:'"Komplette',Session:!0,'l\xf6schen"':!0},"session_destroy();\n")),(0,i.kt)("p",null,"Die Session-Daten bleiben allerdings nur so lange bis der Browser geschlossen wird. Damit Daten l\xe4nger gespeichert werden k\xf6nnen, m\xfcssen Cookies genutzt werden."),(0,i.kt)("h2",{id:"2-cookies"},"2 Cookies"),(0,i.kt)("p",null,"Cookies hat grunds\xe4tzlich die gleiche Funktion wie Session, nur das die Daten auf dem Client gespeichert werden."),(0,i.kt)("p",null,"Um einen Cookie zu setzen muss folgendes genutzt werden:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-php"},'setcookie("username","admin",0); // Dieser Cookie wird bis zum Ende der Session gespeichert.\nsetcookie("email","admin@admin.ch",time()+(3600*24)); // Dieser Cookie wird 24 Stunden gespeichert (muss in Sekunden angegeben werden. 3600 Sekunden * 24 = 86400 Sekunden = 24 Stunden)\n')),(0,i.kt)("p",null,"Cookie auslesen:  "),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-php"},'$username = $_COOKIE["username"];\necho "Dein Username ist: $username";\n')),(0,i.kt)("p",null,"Cookie l\xf6schen:  "),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-php"},'setcookie("username",""time()-3600); // Cookie auf Minuszeit stellen\n')),(0,i.kt)("h2",{id:"3-auftrag-g\xe4stez\xe4hler"},"3 Auftrag G\xe4stez\xe4hler"),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Auftrag G\xe4stez\xe4hler",src:t(5248).Z,width:"1554",height:"972"})),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-php"},'<?php\nsession_start();\n\n$currentSession = session_id();\n\nsetcookie("session", $currentSession, time() + 3600);\n\nif ($currentSession != $_COOKIE["session"]) {\n    if (isset($_COOKIE["counter"])) {\n        $count = $_COOKIE["counter"];\n        $count++;\n        setcookie("counter", $count, time() + 3600);\n    } else {\n        setcookie("counter", 0, time() + 3600);\n    }\n}\n\necho "Current session: " . $currentSession;\necho "<br>Cookie session: " . $_COOKIE["session"];\necho "<br><br>" . $_COOKIE["counter"];\n')),(0,i.kt)("p",null,"Da mit Session gearbeitet wird, muss als erstes ",(0,i.kt)("inlineCode",{parentName:"p"},"session_start()")," ausgef\xfchrt werden. Danach wird die derzeitige Session-ID geholt. Mit dieser k\xf6nnen wir \xfcberpr\xfcfen, ob der User nur die Seite neu l\xe4dt oder wirklich den ganzen Browser neustartet, denn bei jedem neuem Prozess von einem Browser, wird eine neue Session-ID generiert. Danach schreiben wir diese Session in einen Cookie, der f\xfcr 1 Stunde beibehalten wird. Danach k\xf6nnen wir \xfcberpr\xfcfen ob die derzeigte Session der Session im Cookie zutrifft. Trifft dies nicht zu holen wir uns, falls vorhanden, den Cookie ",(0,i.kt)("inlineCode",{parentName:"p"},"counter")," und erh\xf6hen den um einen. Dieser Cookie wird ebenfalls f\xfcr eine 1 Stunde gespeichert. Als letztes geben wir noch die derzeigte und die Cookie Session aus (um zu \xfcberpr\xfcfen) und den Counter.",(0,i.kt)("br",{parentName:"p"}),"\n",(0,i.kt)("a",{parentName:"p",href:"https://www.php-einfach.de/experte/php-codebeispiele/besucherzaehler-mit-reload-sperre/"},"(Besseres Beispiel)")))}c.isMDXComponent=!0},5248:(e,n,t)=>{t.d(n,{Z:()=>r});const r=t.p+"assets/images/auftrag_gaestezaehler-d40602c4cc0aec1dc5895cf1e0a86846.png"}}]);